<!DOCTYPE html>
<html>

<head>
    <title>Game Map</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
    <script src="https://unpkg.com/@mapbox/mapbox-sdk/umd/mapbox-sdk.min.js"></script>
    <script src="https://unpkg.com/@turf/turf@7/turf.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.css"
        type="text/css">
    <style> 
        h1,h2,h3,p,div {
            font-family:sans-serif;
        }
    </style>

</head>

<body>
    <h2 style="text-align:center;">Game Map</h2>
    <div id='mapdiv' style='width: 90%; height: 700px;margin-left: auto; margin-right: auto;'></div>

    <script>

        var turflist = [];
        var turfcolors = ["#ff0000", "#00ff00", "#0000ff", "#9900cc", "#ff9933", "#669999", "#663300", "#ff99ff", "#66ffff", "#ff0000", "#00ff00", "#0000ff", "#9900cc", "#ff9933", "#669999", "#663300", "#ff99ff", "#66ffff"]

        mapboxgl.accessToken = 'pk.eyJ1IjoidXJpZWwtbWVyaWRpYW4iLCJhIjoiY2wyaHN1bzdxMDBpbTNvcGoxeGI0MXBubSJ9.-CPrgMJMxmOb5CAlU_2F2w';
        const map = new mapboxgl.Map({
            container: 'mapdiv',
            style: 'mapbox://styles/mapbox/streets-v11',
            center: [-73.935242, 40.730610],
            zoom: 8,
            attributionControl: false
        });
        
        
        map.on('load', () => {
              const options = {
                bbox: [-73.664,40.923,-74.285,40.484]
              };
                var jfk = turf.point([-73.7799,40.6445]);
                var lga = turf.point([-73.8742,40.7766]);
              const points = turf.featureCollection([jfk,lga]);
              const voronoiPolygons = turf.voronoi(points, options);
        
              map.addSource('points', {
                type: 'geojson',
                data: points
              });
        
              map.addLayer({
                id: 'points',
                type: 'circle',
                source: 'points',
                paint: {
                  'circle-radius': 6,
                  'circle-color': '#0000ff'
                }
              });
        
              map.addSource('voronoiPolygons', {
                type: 'geojson',
                data: voronoiPolygons
              });
        
              map.addLayer({
                id: 'voronoiPolygons',
                type: 'fill',
                source: 'voronoiPolygons',
                paint: {
                  'fill-color': '#0000ff',
                  'fill-opacity': 0.2
                }
              });
            });

    </script>

</body>

</html>
