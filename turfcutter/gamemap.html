<!DOCTYPE html>
<html>

<head>
    <title>Game Map</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
    <script src="https://unpkg.com/@mapbox/mapbox-sdk/umd/mapbox-sdk.min.js"></script>
    <script src="https://unpkg.com/@turf/turf@7/turf.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.css"
        type="text/css">
    <style> 
        h1,h2,h3,p,div {
            font-family:sans-serif;
        }
    </style>

</head>

<body>
    <h2 style="text-align:center;">Game Map</h2>
    <div style="text-align:center;display: flex;justify-content:space-evenly;"><p style="color:blue;" onclick="airportshow()">Airports</p><p style="color:green;">Zoos</p></div>
    <div id='mapdiv' style='width: 90%; height: 700px;margin-left: auto; margin-right: auto;'></div>

    <script>


        mapboxgl.accessToken = 'pk.eyJ1IjoidXJpZWwtbWVyaWRpYW4iLCJhIjoiY2wyaHN1bzdxMDBpbTNvcGoxeGI0MXBubSJ9.-CPrgMJMxmOb5CAlU_2F2w';
        const map = new mapboxgl.Map({
            container: 'mapdiv',
            style: 'mapbox://styles/mapbox/streets-v11',
            center: [-73.935242, 40.730610],
            zoom: 8,
            attributionControl: false
        });
        
        
        map.on('load', () => {
                const options = {
                    bbox: [-74.5, 40.5, -73, 41],
                };
                var jfk = turf.point([-73.7799,40.6445]);
                var lga = turf.point([-73.8742,40.7766]);
                var bxzoo = turf.point([-73.87683,40.85025]);
                var qzoo = turf.point([-73.84947,40.74429]);
                var cpzoo = turf.point([-73.97199,40.767816]);
                var bkzoo = turf.point([-73.96505,40.66435]);
                var sizoo = turf.point([-74.11536,40.62509]);
              const points = turf.featureCollection([jfk,lga]);
                const zoopoints = turf.featureCollection([bxzoo,qzoo,cpzoo,bkzoo,sizoo])
              const voronoiPolygons = turf.voronoi(points,options);
                const zoovoronoi = turf.voronoi(zoopoints,options);

        
              map.addSource('points', {
                type: 'geojson',
                data: points
              });
            map.addSource('zoopoints', {
                type: 'geojson',
                data: zoopoints
              });
        
              map.addLayer({
                id: 'points',
                type: 'circle',
                source: 'points',
                layout: {
                    'visibility': 'none'
                },
                paint: {
                  'circle-radius': 6,
                  'circle-color': '#0000ff'
                }
              });
        
              map.addSource('voronoiPolygons', {
                type: 'geojson',
                data: voronoiPolygons
              });
        

              map.addLayer({
                'id': 'outline',
                'type': 'line',
                'source': 'voronoiPolygons',
                  'layout': {
                    'visibility': 'none'
                },
                'paint': {
                    'line-color': '#00f',
                    'line-width': 2
                }
              });
            map.addLayer({
                id: 'zoopoints',
                type: 'circle',
                source: 'zoopoints',
                layout: {
                    'visibility': 'none'
                },
                paint: {
                  'circle-radius': 6,
                  'circle-color': '#0d0'
                }
              });
        
              map.addSource('zoovoronoi', {
                type: 'geojson',
                data: zoovoronoi
              });
        
              map.addLayer({
                'id': 'zoooutline',
                'type': 'line',
                'source': 'zoovoronoi',
                'layout': {
                    'visibility': 'none'
                },
                'paint': {
                    'line-color': '#0d0',
                    'line-width': 2
                }
              });
            });
        function airportshow() {
            const layer = document.getElementById('outline');
            const visibility = map.getLayoutProperty(layer,'visibility');
            if (visibility === 'visible') {
                map.setLayoutProperty(layer, 'visibility', 'none');
            } else {
                map.setLayoutProperty(
                    layer,
                    'visibility',
                    'visible'
                );
            }
        }

    </script>

</body>

</html>
